<html>
<head>
	<title>{$mybb->settings['bbname']} - {$lang->edit_lists}</title>
	{$headerinclude}
	<script type="text/javascript" src="{$mybb->asset_url}/jscripts/usercp.js?ver=1827"></script>
	<script type="text/javascript">
		lang.remove_buddy = '{$lang->confirm_remove_buddy}';
		lang.remove_ignored = '{$lang->confirm_remove_ignored}';
		lang.adding_buddy = '{$lang->adding_buddy}';
		lang.adding_ignored = '{$lang->adding_ignored}';
      	lang.buddylist_error = '{$lang->buddylist_error}';
	</script>

  <link rel="stylesheet" href="{$mybb->asset_url}/jscripts/select2/select2.css?ver=1807">
	<script type="text/javascript" src="{$mybb->asset_url}/jscripts/select2/select2.min.js?ver=1806"></script>

</head>
<body>
	{$header}
	<form action="usercp.php" method="post" id="buddy" onsubmit="return UserCP.addBuddy('buddy');">
			<input type="hidden" name="action" value="do_editlists" />
			<input type="hidden" name="manage" value="buddy" />
			<input type="hidden" name="my_post_key" value="{$mybb->post_code}" />
			
<div class="container-md">
<div class="row">
<div class="col-3 d-none d-sm-none d-md-none d-lg-block d-xl-block d-xxl-block">

{$usercpnav}
				
</div>
<div class="col">	
	
	<!-- offcanvas -->
				<div class="d-block d-sm-block d-md-block d-lg-none d-xl-none d-xxl-none">
				<button class="btn btn-primary mb-3" type="button" data-bs-toggle="offcanvas" data-bs-target="#offcanvasExample" aria-controls="offcanvasExample">
  <i class="bi bi-list"></i> &nbsp;{$lang->ucpmenu}
</button>
				
				<div class="offcanvas offcanvas-start" tabindex="-1" id="offcanvasExample" aria-labelledby="offcanvasExampleLabel">
  <div class="offcanvas-header catmod">
    <h5 class="offcanvas-title" id="offcanvasExampleLabel">{$lang->ucp_nav_menu}</h5>
    <button type="button" class="btn-close" data-bs-dismiss="offcanvas" aria-label="Close"></button>
  </div>
  <div class="offcanvas-body catmod">
    <div>
     {$usercpnav}
    </div>
  </div>
</div>
				</div>
				<!-- /offcanvas -->
<div class="card shadow-sm bg-white rounded border-0">
<div class="card-body bg-white p-2 p-sm-2 p-md-2 p-lg-5 p-xl-5 p-xxl-5 mt-0 rounded">
	
	<div class="legend mb-4">{$lang->add_buddies}</div>
		
							<div class="p-3"><div class="text-muted mb-4">{$lang->add_buddies_desc}</div>
							
								<label>{$lang->username_or_usernames}</label>
								<input type="text" name="add_username" id="buddy_add_username" class="form-control border form-control border-sm border" />
									
									<div class="text-end"><input type="submit" value="{$lang->add_to_buddies}" id="buddy_submit" class="btn btn-primary mt-1" /></div>
	</div>
							<script type="text/javascript">
							<!--
								if(use_xmlhttprequest == "1")
								{
									MyBB.select2();
									$("#buddy_add_username").select2({
										placeholder: "{$lang->search_user}",
										minimumInputLength: 2,
										maximumSelectionSize: 5,
										multiple: true,
										ajax: { // instead of writing the function to execute the request we use Select2's convenient helper
											url: "xmlhttp.php?action=get_users",
											dataType: 'json',
											data: function (term, page) {
												return {
													query: term, // search term
												};
											},
											results: function (data, page) { // parse the results into the format expected by Select2.
												// since we are using custom formatting functions we do not need to alter remote JSON data
												return {results: data};
											}
										},
										initSelection: function(element, callback) {
											var query = $(element).val();
											if (query !== "") {
												var newqueries = [];
												exp_queries = query.split(",");
												$.each(exp_queries, function(index, value ){
													if(value.replace(/\s/g, '') != "")
													{
														var newquery = {
															id: value.replace(/,\s?/g, ", "),
															text: value.replace(/,\s?/g, ", ")
														};
														newqueries.push(newquery);
													}
												});
												callback(newqueries);
											}
										},
									});
                                }
                            // -->
							</script>
						
	</form>
	<div class="legend mb-4 mt-4">{$lang->current_buddies}</div>
	
					<ul id="buddy_list" style="list-style: none;">
								{$buddy_list}
							</ul>
						
		
		<form action="usercp.php" method="post" id="ignored" onsubmit="return UserCP.addBuddy('ignored');">
			<input type="hidden" name="action" value="do_editlists" />
			<input type="hidden" name="manage" value="ignored" />
			<input type="hidden" name="my_post_key" value="{$mybb->post_code}" />
			<div class="legend mt-4 mb-4">{$lang->add_ignored_users}</div>
			<div class="p-3">
							<div class="text-muted mb-4">{$lang->add_ignored_users_desc}</div>
			
			
				<label>{$lang->username_or_usernames}</label>
				<input type="text" name="add_username" id="ignored_add_username" class="form-control border" />
					
					
						<div class="text-end"><input type="submit" value="{$lang->ignore_users}" id="ignored_submit" class="btn btn-primary mt-1" /></div>
					</div>
							<script type="text/javascript">
							<!--
								if(use_xmlhttprequest == "1")
								{
									MyBB.select2();
									$("#ignored_add_username").select2({
										placeholder: "{$lang->search_user}",
										minimumInputLength: 2,
										maximumSelectionSize: 5,
										multiple: true,
										ajax: { // instead of writing the function to execute the request we use Select2's convenient helper
											url: "xmlhttp.php?action=get_users",
											dataType: 'json',
											data: function (term, page) {
												return {
													query: term, // search term
												};
											},
											results: function (data, page) { // parse the results into the format expected by Select2.
												// since we are using custom formatting functions we do not need to alter remote JSON data
												return {results: data};
											}
										},
										initSelection: function(element, callback) {
											var query = $(element).val();
											if (query !== "") {
												var newqueries = [];
												exp_queries = query.split(",");
												$.each(exp_queries, function(index, value ){
													if(value.replace(/\s/g, '') != "")
													{
														var newquery = {
															id: value.replace(/,\s?/g, ", "),
															text: value.replace(/,\s?/g, ", ")
														};
														newqueries.push(newquery);
													}
												});
												callback(newqueries);
											}
										},
									});
								}
							// -->
							</script>
			<div class="legend mt-4 mb-4">{$lang->current_ignored_users}</div>
			
							<ul id="ignore_list" style="list-style: none;">
								{$ignore_list}
							</ul>
						
		</form>
         
					{$received_requests}
			 
					{$sent_requests}
	
			
	</div></div>
</div></div>
</div>
	{$footer}
</body>
</html>